<!-- Header -->
<header class="page-header">
  <button class="back-btn" (click)="goBack()">
    <i class="fi fi-sr-arrow-left"></i>
  </button>
  <h1>Página de Produto</h1>
</header>

<!-- CONTAINER sem warnings -->
<ng-container *ngIf="product; else notFound">

  <main class="product-main">

    <!-- Product Image -->
    <section class="product-hero">
      <div
        class="product-main-image"
        [style.background-image]="'url(' + (product.image || '/assets/no-image.png') + ')'"
      ></div>
    </section>

    <!-- Product Info -->
    <section class="product-details">

      <h2>{{ product.name }}</h2>

      <p class="product-type">{{ product.type }}</p>

      <p class="product-price">{{ product.price }}</p>

      <!-- Action Buttons -->
      <div class="product-actions">
        <button
          class="btn-primary"
          *ngIf="showAddToCartButton"
          (click)="addToCart()"
        >
          Adicionar ao Carrinho
        </button>

        <button
          class="btn-primary"
          *ngIf="showTradeButton"
          (click)="goToChat()"
          style="margin-top: 12px;"
        >
          Quero Trocar
        </button>
      </div>

      <!-- Seller Info -->
      <div class="seller-info">
        <div class="seller-avatar">
          <i class="fi fi-sr-user"></i>
        </div>

        <div class="seller-details">
          <h3>João Silva</h3>
          <div class="rating">
            <span class="stars">★★★★★</span>
          </div>
        </div>
      </div>

      <!-- Description -->
      <div class="description-section">
        <h3>Descrição</h3>
        <p class="description-text">
          {{ product.description || 'Nenhuma descrição informada.' }}
        </p>
      </div>

      <!-- Similar Products -->
      <div class="similar-products" *ngIf="similarProducts.length > 0">
        <h3>Produtos Similares</h3>

        <div class="similar-grid">
          <div
            class="similar-item"
            *ngFor="let similar of similarProducts"
            (click)="openProduct(similar)"
          >

            <div
              class="similar-image"
              [style.background-image]="'url(' + (similar.image || '/assets/no-image.png') + ')'"
            ></div>

            <p class="similar-name">{{ similar.name }}</p>
            <p class="similar-price">{{ similar.price }}</p>
          </div>
        </div>

      </div>

    </section>
  </main>

</ng-container>

<!-- TEMPLATE de produto não encontrado -->
<ng-template #notFound>
  <div class="not-found">
    <h2>Produto não encontrado</h2>
    <button class="btn-primary" (click)="goBack()">Voltar</button>
  </div>
</ng-template>
